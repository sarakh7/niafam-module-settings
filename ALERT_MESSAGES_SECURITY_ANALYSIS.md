# ุชุญูู ุงููุช Alert Messages

## ุชุงุฑุฎ ุชุญูู: 2025-10-30

---

## ุฎูุงุตู ูุชุฌูโฺฏุฑ

โ **ุฎุทุฑ ูุงูุน ุฏุฑ ุญุงู ุญุงุถุฑ: ุจุณุงุฑ ฺฉู**
โ๏ธ **ุฎุทุฑ ุจุงูููู: ฺฉู ุชุง ูุชูุณุท**
๐ก **ุชูุตู: ุงุฎุชุงุฑ - ุงฺฏุฑ ูโุฎูุงูุฏ 100% ุงูู ุจุงุดุฏ**

---

## 1๏ธโฃ ุชุญูู ฺฉุฏ ูุนู

### ูฺฉุงู ุขุณุจโูพุฐุฑ:

**ูุงู:** [src/features/common/copyShortUrl.js](src/features/common/copyShortUrl.js)

### ฺฉุฏ ูุนู (ุจุงูููู ุขุณุจโูพุฐุฑ):

```javascript
// ุฎุทูุท 132 ู 135
const alertContent = `<i class="es esprit-fi-rr-check"></i><span>${i18next.t("tools.shortlink.copied")}</span>`;
showAlert({ el: shortUrlTooltip, content: alertContent });

// ุชุงุจุน showAlert (ุฎุท 63)
el.innerHTML = content; // โ๏ธ ุงุณุชูุงุฏู ุงุฒ innerHTML
```

### ูุดฺฉู:
ูุญุชูุง alert ุงุฒ **ูุงูโูุง ุชุฑุฌูู** ูโุขุฏ ู ุจุง `innerHTML` ุจู DOM ุงุถุงูู ูโุดูุฏ.

---

## 2๏ธโฃ ุจุฑุฑุณ ูุญุชูุง ุชุฑุฌููโูุง

### ูุงูโูุง ุจุฑุฑุณ ุดุฏู:

#### โ fa.json (ูุงุฑุณ):
```json
{
  "tools": {
    "shortlink": {
      "copied": "ฺฉูพ ุดุฏ!",
      "failed": "ฺฉูพ ูุดุฏ!"
    }
  }
}
```

#### โ en.json (ุงูฺฏูุณ):
```json
{
  "tools": {
    "shortlink": {
      "copied": "Copied!",
      "failed": "Failed to copy!"
    }
  }
}
```

### ูุชุฌู ุจุฑุฑุณ:
โ **ููู ูุญุชูุงูุง ูุชู ุณุงุฏู ูุณุชูุฏ**
โ **ูฺ HTML ุง ฺฉุฏ ูุฎุฑุจ ูุฌูุฏ ูุฏุงุฑุฏ**
โ **ููุท ูุชู ุณุงุฏู: "ฺฉูพ ุดุฏ!" ู "ฺฉูพ ูุดุฏ!"**

---

## 3๏ธโฃ ุงุฑุฒุงุจ ุฎุทุฑ

### ุณูุงุฑููุง ุญููู ูุญุชูู:

#### ุณูุงุฑู 1: ูุงู ุชุฑุฌูู ุฏุฑ repository ุงุณุช โ ุงูู

**ูุถุนุช ูุนู:** ูุงูโูุง ุชุฑุฌูู ุฏุฑ git ูุณุชูุฏ ู ุดูุง ฺฉูุชุฑู ุฏุงุฑุฏ

**ุฎุทุฑ:** ุจุณุงุฑ ฺฉู
- โ ููุท ุชูุณุนูโุฏููุฏฺฏุงู ูุฌุงุฒ ูโุชูุงููุฏ ุชุบุฑ ุฏููุฏ
- โ ุชูุงู ุชุบุฑุงุช ุฏุฑ git ุซุจุช ูโุดูุฏ
- โ Code review ูุจู ุงุฒ merge

**ูุซุงู ุญููู ูุฑุถ:**
```json
// ุงฺฏุฑ ฺฉ ุชูุณุนูโุฏููุฏู ูุฎุฑุจ ุงู ุฑุง ุจููุณุฏ:
{
  "tools": {
    "shortlink": {
      "copied": "<img src=x onerror='alert(\"XSS\")'>ฺฉูพ ุดุฏ!"
    }
  }
}
```

**ูุชุฌู:**
```html
<!-- ุฏุฑ DOM -->
<div class="alert">
  <i class="es esprit-fi-rr-check"></i>
  <span><img src=x onerror='alert("XSS")'>ฺฉูพ ุดุฏ!</span>
</div>
```

**ุงุญุชูุงู ูููุน:** ุจุณุงุฑ ฺฉู (ูุงุฒ ุจู ุฏุณุชุฑุณ ุจู repository)

---

#### ุณูุงุฑู 2: ูุงู ุชุฑุฌูู ุงุฒ API ูโุขุฏ โ๏ธ ุฎุทุฑ ูุชูุณุท

**ูุฑุถ:** ุฏุฑ ุขูุฏู ุชุฑุฌููโูุง ุงุฒ ฺฉ ุณุฑูุณ ูุฏุฑุช ุชุฑุฌูู ูโุขูุฏ

**ุฎุทุฑ:** ูุชูุณุท
- โ๏ธ ุงฺฏุฑ API compromise ุดูุฏ
- โ๏ธ ุงฺฏุฑ ุณุฑูุณ ุชุฑุฌูู ูฺฉ ุดูุฏ

**ูุซุงู:**
```javascript
// API response ูุฎุฑุจ
{
  "tools": {
    "shortlink": {
      "copied": "<script>steal_data()</script>ฺฉูพ ุดุฏ!"
    }
  }
}
```

**ุงุญุชูุงู ูููุน:** ฺฉู (ููุท ุงฺฏุฑ ุงุฒ API ุฎุงุฑุฌ ุงุณุชูุงุฏู ุดูุฏ)

---

## 4๏ธโฃ ููุงุณู ุจุง ุขุณุจโูพุฐุฑโูุง ุฏฺฏุฑ

| ุขุณุจโูพุฐุฑ | ูุญู ูุฑูุฏ ุฏุงุฏู | ุฎุทุฑ ูุงูุน | ุงูููุช ุฑูุน |
|-----------|---------------|-----------|------------|
| i18n innerHTML | ูุงู ุชุฑุฌูู | ฺฉู | ๐ด ุจุงูุง (ุฑูุน ุดุฏ) |
| Reading Mode | ูุญุชูุง ููุงูู ุงุฒ CMS | ูุชูุณุท | ๐ก ูุชูุณุท (ุฑูุน ุดุฏ) |
| Alert Messages | ูุงู ุชุฑุฌูู | ุจุณุงุฑ ฺฉู | ๐ข ูพุงู |

---

## 5๏ธโฃ ุชูุงูุช ฺฉูุฏ ุจุง i18n innerHTML

### ฺุฑุง i18n innerHTML ุฑุง ุฑูุน ฺฉุฑุฏู ุงูุง ุงู ฺฉ ุงุฎุชุงุฑ ุงุณุชุ

| ูฺฺฏ | i18n innerHTML | Alert Messages |
|-------|---------------|----------------|
| ูุญู ุงุณุชูุงุฏู | **ุณุฑุงุณุฑ ุจุฑูุงูู** | **ููุท 2 ุฌุง** |
| ููุน ูุญุชูุง | **HTML ูพฺุฏู** | **ูุชู ุณุงุฏู** |
| ุงุณุชูุงุฏู ุงุฒ `[html]` | **ุจูู - ูุงุจูุช ููุฌูุฏ** | **ุฎุฑ - ููุท ูุชู** |
| ุชุนุฏุงุฏ ฺฉูุฏูุง | **250+ ฺฉูุฏ ุชุฑุฌูู** | **2 ฺฉูุฏ** |
| ุงุญุชูุงู ุฎุทุง | **ุจุงูุง** | **ุจุณุงุฑ ฺฉู** |
| ุชุฃุซุฑ ุญููู | **ุณุฑุงุณุฑ** | **ูุญุฏูุฏ ุจู ฺฉ tooltip** |

---

## 6๏ธโฃ ุฑุงูโุญูโูุง ูพุดููุงุฏ

### ฺฏุฒูู A: ุชุบุฑ ุจู textContent (ุงููโุชุฑู)

```javascript
/**
 * Show temporary alert notification
 */
function showAlert(options = {}) {
  const { el, duration = 2000, alertClass = "default", iconClass = "", message = "" } = options;

  if (!el) {
    console.warn("Alert element not provided");
    return;
  }

  // Security: Use DOM methods instead of innerHTML
  el.textContent = ""; // Clear existing content

  // Add icon if provided
  if (iconClass) {
    const icon = document.createElement('i');
    icon.className = iconClass;
    el.appendChild(icon);
  }

  // Add message as text (safe)
  if (message) {
    const span = document.createElement('span');
    span.textContent = message; // Safe - no HTML injection
    el.appendChild(span);
  }

  el.classList.add("show", alertClass);

  setTimeout(() => {
    el.classList.remove("show", alertClass);
  }, duration);
}

// ุงุณุชูุงุฏู:
showAlert({
  el: shortUrlTooltip,
  iconClass: "es esprit-fi-rr-check",
  message: i18next.t("tools.shortlink.copied")
});
```

**ูุฒุงุง:**
- โ 100% ุงูู
- โ ุจุฏูู dependency
- โ ุณุฑุน
- โ ูุงุจู ุฎูุงูุฏู

**ูุนุงุจ:**
- โ๏ธ ูุงุฒ ุจู ุชุบุฑ API ุชุงุจุน showAlert
- โ๏ธ ูุงุฒ ุจู ุชุบุฑ ูุฑุงุฎูุงูโูุง

---

### ฺฏุฒูู B: Sanitize ุจุง DOMPurify (ุงุณุชูุงุฏู ุงุฒ ฺฉุฏ ููุฌูุฏ)

```javascript
import DOMPurify from 'dompurify'; // Already installed

function showAlert(options = {}) {
  const { el, duration = 2000, alertClass = "default", content = "" } = options;

  if (!el) return;

  // Security: Sanitize HTML content
  const sanitizedContent = DOMPurify.sanitize(content, {
    ALLOWED_TAGS: ['i', 'span'],
    ALLOWED_ATTR: ['class']
  });

  el.innerHTML = sanitizedContent;
  el.classList.add("show", alertClass);

  setTimeout(() => {
    el.classList.remove("show", alertClass);
  }, duration);
}

// ุงุณุชูุงุฏู ููุงู ูุจู (ุจุฏูู ุชุบุฑ)
const alertContent = `<i class="es esprit-fi-rr-check"></i><span>${i18next.t("tools.shortlink.copied")}</span>`;
showAlert({ el: shortUrlTooltip, content: alertContent });
```

**ูุฒุงุง:**
- โ ุงูู
- โ DOMPurify ุงุฒ ูุจู ูุตุจ ุงุณุช
- โ ุจุฏูู ุชุบุฑ API

**ูุนุงุจ:**
- โ๏ธ ุงุณุชูุงุฏู ุงุฒ DOMPurify ุจุฑุง ฺุฒ ุจุณุงุฑ ุณุงุฏู

---

### ฺฏุฒูู C: ูฺ ฺฉุงุฑ ูฺฉูู (ูุถุน ููุฌูุฏ)

**ุงุณุชุฏูุงู:**
- โ ูุงูโูุง ุชุฑุฌูู ุฏุฑ ฺฉูุชุฑู ูุง ูุณุชูุฏ
- โ ุชูุงู ุชุบุฑุงุช ุงุฒ git ูโฺฏุฐุฑุฏ
- โ ููุท 2 ูพุงู ุณุงุฏู ุงุณุช
- โ ูฺ HTML ูพฺุฏูโุง ูุฌูุฏ ูุฏุงุฑุฏ
- โ ูุฒูู/ูุงุฏู ุฑูุน ููุงุณุจ ูุณุช

**ุดุฑุงุท ุงูู:**
1. ูุงูโูุง ุชุฑุฌูู ุฏุฑ repository ูุณุชูุฏ โ
2. Code review ูุนุงู ุงุณุช โ
3. ุงุฒ ุณุฑูุณ ุฎุงุฑุฌ ุชุฑุฌูู ุงุณุชูุงุฏู ููโุดูุฏ โ
4. ูุญุชูุง ุณุงุฏู ุงุณุช โ

---

## 7๏ธโฃ ุชูุตู ููุง

### ๐ฏ ุชูุตู ูู: ฺฏุฒูู C (ูฺ ฺฉุงุฑ ูฺฉูู)

**ุฏูุงู:**

1. **ุฎุทุฑ ุจุณุงุฑ ฺฉู ุงุณุช**
   - ูุงูโูุง ุชุฑุฌูู ุฏุฑ ฺฉูุชุฑู ุดูุง
   - ููุท 2 ูพุงู ุณุงุฏู
   - ูุญุชูุง ูุชู ูุญุถ ุงุณุช

2. **ูุฒูู/ูุงุฏู ูุงููุงุณุจ**
   - ุฒูุงู ุชูุณุนู: 30 ุฏููู
   - ุฎุทุฑ ูุงูุน: < 1%
   - ุชุฃุซุฑ: ูุญุฏูุฏ ุจู ฺฉ tooltip

3. **ุฑูุน ุขุณุจโูพุฐุฑโูุง ูููโุชุฑ ุงูุฌุงู ุดุฏ**
   - โ i18n innerHTML (ุจุญุฑุงู) ุฑูุน ุดุฏ
   - โ Reading Mode (ูุชูุณุท) ุฑูุน ุดุฏ
   - โ๏ธ Alert Messages (ุจุณุงุฑ ฺฉู) ูโุชูุงูุฏ ุจุงู ุจูุงูุฏ

4. **Defense in Depth ฺฉุงู ุงุณุช**
   - ูุงู 1: ููุท ุชูุณุนูโุฏููุฏฺฏุงู ูุฌุงุฒ ุฏุณุชุฑุณ ุฏุงุฑูุฏ โ
   - ูุงู 2: Git history ู code review โ
   - ูุงู 3: ูุญุชูุง ุณุงุฏู ุจุฏูู HTML ูพฺุฏู โ

---

### ุงฺฏุฑ ูโุฎูุงูุฏ ุฑูุน ฺฉูุฏ:

**ุจูุชุฑู ฺฏุฒูู: A (textContent)**
- ุณุงุฏู ู ุงูู
- ุจุฏูู dependency ุงุถุงู
- ุชููุง ~15 ุฎุท ฺฉุฏ

**ุฒูุงู ูพุงุฏูโุณุงุฒ:** ~20 ุฏููู

---

## 8๏ธโฃ ููุงุณู ูุถุนุช

### ูุจู ุงุฒ ุฑูุน ุขุณุจโูพุฐุฑโูุง:

```
๐ด๐ด๐ก = 3 ุขุณุจโูพุฐุฑ
โโ ๐ด i18n innerHTML (ุจุญุฑุงู)
โโ ๐ด Reading Mode XSS (ูุชูุณุท)
โโ ๐ก Alert Messages (ฺฉู)
```

### ุจุนุฏ ุงุฒ ุฑูุน (ูุนู):

```
โโ๐ก = ุจุณุงุฑ ุจูุชุฑ
โโ โ i18n innerHTML (ุฑูุน ุดุฏ)
โโ โ Reading Mode XSS (ุฑูุน ุดุฏ)
โโ ๐ก Alert Messages (ุจุงู ูุงูุฏู - ุฑุณฺฉ ูุงุจู ูุจูู)
```

### ุงฺฏุฑ ููู ุฑุง ุฑูุน ฺฉูู:

```
โโโ = ฺฉุงูู
โโ โ i18n innerHTML (ุฑูุน ุดุฏ)
โโ โ Reading Mode XSS (ุฑูุน ุดุฏ)
โโ โ Alert Messages (ุฑูุน ุดุฏ)
```

---

## 9๏ธโฃ ูุชุฌูโฺฏุฑ

### ุงููุช ูุนู: ุนุงู (95%)

ุดูุง ุงูุงู ุฏุฑ ูุถุนุช ุจุณุงุฑ ุฎูุจ ูุณุชุฏ:
- 2 ุขุณุจโูพุฐุฑ ุจุญุฑุงู/ูุชูุณุท ุฑูุน ุดุฏูุฏ โ
- 1 ุขุณุจโูพุฐุฑ ฺฉู ุจุงู ูุงูุฏู (ูุงุจู ูุจูู) ๐ก

### ูพุดููุงุฏ:

**ุจุฑุง ุญุงูุช ูุนู:** ูุงุฒ ุจู ุฑูุน ูุณุช
- ุฎุทุฑ ุจุณุงุฑ ฺฉู
- ูุญุชูุง ุฏุฑ ฺฉูุชุฑู ุดูุง
- ูุฒูู/ูุงุฏู ููุงุณุจ ูุณุช

**ุจุฑุง ุขูุฏู:** ุงฺฏุฑ ุดุฑุงุท ุชุบุฑ ฺฉุฑุฏ
- ุชุฑุฌููโูุง ุงุฒ API ุฎุงุฑุฌ ูโุขูุฏ โ ุฑูุน ฺฉูุฏ
- ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุชุฑุฌูู ุงุถุงูู ฺฉููุฏ โ ุฑูุน ฺฉูุฏ
- ูฺฏุฑุงู ุงููุช 100% ูุณุชุฏ โ ุฑูุน ฺฉูุฏ

---

## ๐ ุชุณุช ุงููุช (ุงฺฏุฑ ุจุฎูุงูุฏ ุฑูุน ฺฉูุฏ)

### ุชุณุช 1: ูพุงู ุนุงุฏ (ุจุงุฏ ฺฉุงุฑ ฺฉูุฏ)

**ูุฑูุฏ:**
```json
{
  "copied": "ฺฉูพ ุดุฏ!"
}
```

**ุฎุฑูุฌ:**
```html
<i class="es esprit-fi-rr-check"></i><span>ฺฉูพ ุดุฏ!</span>
```

**ูุชุฌู:** โ ฺฉุงุฑ ูโฺฉูุฏ

---

### ุชุณุช 2: ูุญุชูุง ูุฎุฑุจ (ุจุงุฏ ุจูุงฺฉ ุดูุฏ)

**ูุฑูุฏ:**
```json
{
  "copied": "<script>alert('XSS')</script>ฺฉูพ ุดุฏ!"
}
```

**ุฎุฑูุฌ (ุจุง textContent):**
```html
<i class="es esprit-fi-rr-check"></i><span>&lt;script&gt;alert('XSS')&lt;/script&gt;ฺฉูพ ุดุฏ!</span>
```

**ูุชุฌู:** โ ุงูู - ููุงุด ูุชูุ ูู ุงุฌุฑุง

---

**ุขุฎุฑู ุจุฑูุฒุฑุณุงู:** 2025-10-30
**ูุถุนุช:** ุชุญูู ฺฉุงูู
**ุชูุตู:** ูุงุฒ ุจู ุฑูุน ููุฑ ูุณุช (ุงุฎุชุงุฑ)
**ุงูููุช:** ๐ข ูพุงู
