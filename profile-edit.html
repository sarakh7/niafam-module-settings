<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ویرایش پروفایل - Niafam</title>
    <link rel="icon" href="/assets/img/niafam-favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="/assets/css/reset.css" />
    <link rel="stylesheet" href="/assets/css/persian-datepicker.min.css" />

    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/persian-date.min.js"></script>
    <script src="/assets/js/persian-datepicker.js"></script>

    <style>
      @font-face {
        font-family: "niafam";
        src: url("/assets/fonts/niafam.woff?ahg0bg");
        font-weight: normal;
        font-style: normal;
        font-display: block;
      }

      @font-face {
        font-family: dana;
        src: url("/assets/fonts/DanaFaNum-Regular.woff");
        font-weight: normal;
        font-display: swap;
      }

      @font-face {
        font-family: dana;
        src: url("/assets/fonts/DanaFaNum-Bold.woff");
        font-weight: bold;
        font-display: swap;
      }

      @font-face {
        font-family: dana;
        src: url("/assets/fonts/DanaFaNum-Black.woff");
        font-weight: 900;
        font-display: swap;
      }

      @font-face {
        font-family: dana;
        src: url("/assets/fonts/DanaFaNum-Medium.woff");
        font-weight: 500;
        font-display: swap;
      }

      @font-face {
        font-family: dana;
        src: url("/assets/fonts/DanaFaNum-DemiBold.woff");
        font-weight: 600;
        font-display: swap;
      }

      @font-face {
        font-family: dana;
        src: url("/assets/fonts/DanaFaNum-ExtraBold.woff");
        font-weight: 800;
        font-display: swap;
      }

      /* en font */
      @font-face {
        font-family: Roboto;
        src: url("/assets/fonts/Roboto-Regular.woff");
        font-weight: normal;
        font-display: swap;
      }

      @font-face {
        font-family: Roboto;
        src: url("/assets/fonts/Roboto-Bold.woff");
        font-weight: bold;
        font-display: swap;
      }

      @font-face {
        font-family: Roboto;
        src: url("/assets/fonts/Roboto-Medium.woff");
        font-weight: 500;
        font-display: swap;
      }

      body {
        font-size: 16px;
        font-family: dana;
      }

      body[dir="ltr"] {
        font-family: Roboto;
      }
      ul.breadcrumb {
        padding: 10px 16px;
        list-style: none;
        margin: 0;
      }
      ul.breadcrumb li {
        display: inline;
        font-size: 18px;
      }
      ul.breadcrumb li a {
        color: #000;
        font-size: 14px;
        text-decoration: none;
      }
      ul.breadcrumb li + li:before {
        padding: 0;
        color: #000;
        content: "/ ";
      }
      ul.breadcrumb li a:hover {
        color: #01447e;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <header class="header">
      <img class="vector" src="/assets/img/niafam-logo.png" alt="Niafam Logo" width="148" height="60" />
      <nav class="auto-layout">
        <a href="#" class="text-wrapper" data-i18n="nav.contactUs">تماس با ما</a>
        <a href="#" class="text-wrapper" data-i18n="nav.organizationalPortal">پورتال سازمانی</a>
        <a href="#" class="text-wrapper" data-i18n="nav.aboutUs">درباره نیافام</a>
        <a href="#" class="style-filled"><span class="do-something" data-i18n="nav.login">ورود کاربران</span></a>
      </nav>
    </header>
    <div class="page-content-wrapper">
      <div class="page-content-breadcrumb">
        <ul class="breadcrumb" itemscope="" itemtype="http://schema.org/BreadcrumbList">
          <li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
            <a itemprop="item" href="/">
              <span itemprop="name" data-i18n="breadcrumb.home">صفحه اصلی</span>
            </a>
            <meta itemprop="position" content="1" />
          </li>
          <li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
            <a itemprop="item" href="/profile-edit.html">
              <span itemprop="name" data-i18n="breadcrumb.editProfile">ویرایش پروفایل</span>
            </a>
            <meta itemprop="position" content="2" />
          </li>
        </ul>
      </div>

      <!-- محتوای اصلی ویرایش پروفایل -->
      <div class="profile-edit-container">
        <div class="profile-edit">
          <div class="es-container">
            <h2 class="nes-section-title" data-i18n="profile.editProfile">ویرایش پروفایل</h2>

            <!-- تب‌های ویرایش - Pill Style -->
            <ul class="profile-edit__tabs" id="profiles-info" role="tablist">
              <li class="profile-edit__tab-item">
                <a class="profile-edit__tab-link profile-edit__tab-link--active" data-toggle="tab" href="#profile-tab" role="tab" aria-controls="profile" aria-selected="true">
                  <i class="es esprit-user profile-edit__tab-icon"></i>
                  <span data-i18n="profile.tabs.basicInfo">اطلاعات اصلی</span>
                </a>
              </li>
              <li class="profile-edit__tab-item">
                <a class="profile-edit__tab-link" data-toggle="tab" href="#password-tab" role="tab" aria-controls="password" aria-selected="false">
                  <i class="es esprit-lock profile-edit__tab-icon"></i>
                  <span data-i18n="profile.tabs.changePassword">تغییر رمز</span>
                </a>
              </li>
              <li class="profile-edit__tab-item">
                <a class="profile-edit__tab-link" data-toggle="tab" href="#avatar-tab" role="tab" aria-controls="avatar" aria-selected="false">
                  <i class="es esprit-camera profile-edit__tab-icon"></i>
                  <span data-i18n="profile.tabs.uploadAvatar">آپلود تصویر</span>
                </a>
              </li>
            </ul>

            <!-- محتوای تب‌ها -->
            <div class="profile-edit__tab-content" id="profile-content">
              <!-- تب اطلاعات اصلی -->
              <div class="profile-edit__tab-pane profile-edit__tab-pane--active" id="profile-tab" role="tabpanel" aria-labelledby="profile-tab">
                <form id="profileForm" method="post" class="nes-form" novalidate="novalidate">
                  <input type="hidden" id="action" name="action" value="save_profile_user" />

                  <!-- Two-column grid for form fields -->
                  <div class="profile-edit__form-grid">
                    <!-- Name -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="name" data-i18n="profile.form.firstName">نام</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-user profile-edit__input-icon"></i>
                        <input type="text" class="nes-input" name="name" id="name" value="{name}" placeholder="" data-i18n="[placeholder]profile.form.firstNamePlaceholder" maxlength="512" />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Last Name -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="lastname" data-i18n="profile.form.lastName">نام خانوادگی</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-user profile-edit__input-icon"></i>
                        <input
                          type="text"
                          class="nes-input"
                          name="lastname"
                          id="lastname"
                          value="{lastname}"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.lastNamePlaceholder"
                          maxlength="512"
                          autocomplete="off"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Email -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="emailaddress" data-i18n="profile.form.email">ایمیل</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-mail profile-edit__input-icon"></i>
                        <input
                          type="email"
                          class="nes-input"
                          name="emailaddress"
                          id="emailaddress"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.emailPlaceholder"
                          maxlength="512"
                          dir="ltr"
                          value="{email}"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Mobile -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="mobile" data-i18n="profile.form.mobile">شماره تلفن همراه</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-phone profile-edit__input-icon"></i>
                        <input
                          type="text"
                          class="nes-input"
                          name="mobile"
                          id="mobile"
                          value="{mobile}"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.mobilePlaceholder"
                          maxlength="512"
                          dir="ltr"
                          autocomplete="off"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Birthdate -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="birthdate" data-i18n="profile.form.birthdate">تاریخ تولد</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-calendar profile-edit__input-icon"></i>
                        <input
                          type="text"
                          class="nes-input"
                          name="birthdate"
                          id="birthdate"
                          value="{birthdate}"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.birthdatePlaceholder"
                          maxlength="512"
                          dir="ltr"
                          autocomplete="off"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Gender -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="gender" data-i18n="profile.form.gender">جنسیت</label>
                      <select class="nes-input" name="gender" id="gender">
                        <option value="" data-i18n="profile.form.genderNone">بدون انتخاب</option>
                        <option value="1" {gen_male} data-i18n="profile.form.genderMale">مذکر</option>
                        <option value="0" {gen_female} data-i18n="profile.form.genderFemale">مونث</option>
                      </select>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Province -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="province" data-i18n="profile.form.province">استان</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-map profile-edit__input-icon"></i>
                        <input
                          type="text"
                          class="nes-input"
                          name="province"
                          id="province"
                          value="{province}"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.provincePlaceholder"
                          maxlength="512"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- City -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="city" data-i18n="profile.form.city">شهر</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-map-pin profile-edit__input-icon"></i>
                        <input type="text" class="nes-input" name="city" id="city" value="{city}" placeholder="" data-i18n="[placeholder]profile.form.cityPlaceholder" maxlength="512" />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Address (full width) -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="address" data-i18n="profile.form.address">آدرس</label>
                      <textarea class="nes-input" name="address" id="address" placeholder="" data-i18n="[placeholder]profile.form.addressPlaceholder" maxlength="1024" rows="3">{address}</textarea>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Postal Code -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="postalcode" data-i18n="profile.form.postalCode">کد پستی</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-hash profile-edit__input-icon"></i>
                        <input
                          type="text"
                          class="nes-input"
                          name="postalcode"
                          id="postalcode"
                          value="{postalcode}"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.postalCodePlaceholder"
                          maxlength="20"
                          dir="ltr"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Website -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="website" data-i18n="profile.form.website">وب سایت</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-fi-rr-globe profile-edit__input-icon"></i>
                        <input
                          type="url"
                          class="nes-input"
                          name="website"
                          id="website"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.websitePlaceholder"
                          maxlength="512"
                          dir="ltr"
                          value="{website}"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- LinkedIn -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="linkedin" data-i18n="profile.form.linkedin">لینکدین</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-linkedin profile-edit__input-icon"></i>
                        <input
                          type="url"
                          class="nes-input"
                          name="linkedin"
                          id="linkedin"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.linkedinPlaceholder"
                          maxlength="512"
                          dir="ltr"
                          value="{linkedin}"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Instagram -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="instagram" data-i18n="profile.form.instagram">اینستاگرام</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-Instagram profile-edit__input-icon"></i>
                        <input
                          type="url"
                          class="nes-input"
                          name="instagram"
                          id="instagram"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.instagramPlaceholder"
                          maxlength="512"
                          dir="ltr"
                          value="{instagram}"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>

                    <!-- Telegram -->
                    <div class="nes-form-group">
                      <label class="nes-label" for="telegram" data-i18n="profile.form.telegram">تلگرام</label>
                      <div class="profile-edit__input-wrapper">
                        <i class="es esprit-telegram profile-edit__input-icon"></i>
                        <input
                          type="url"
                          class="nes-input"
                          name="telegram"
                          id="telegram"
                          placeholder=""
                          data-i18n="[placeholder]profile.form.telegramPlaceholder"
                          maxlength="512"
                          dir="ltr"
                          value="{telegram}"
                        />
                      </div>
                      <span class="profile-edit__field-error"></span>
                    </div>
                  </div>

                  <!-- Description (full width) -->
                  <div class="nes-form-group">
                    <label class="nes-label" for="description" data-i18n="profile.form.description">توضیحات</label>
                    <textarea class="nes-input" name="description" id="description" placeholder="" data-i18n="[placeholder]profile.form.descriptionPlaceholder" maxlength="512" rows="4">
{description}</textarea
                    >
                    <span class="profile-edit__field-error"></span>
                  </div>

                  <div class="form-message"></div>

                  <div class="nes-form-actions">
                    <button type="submit" class="nes-btn nes-btn-primary">
                      <i class="es esprit-check"></i>
                      <span data-i18n="profile.form.submit">ثبت فرم</span>
                    </button>
                  </div>
                </form>
              </div>

              <!-- تب تغییر رمز -->
              <div class="profile-edit__tab-pane" id="password-tab" role="tabpanel" aria-labelledby="password-tab">
                <form id="changePassForm" method="post" class="nes-form" novalidate="novalidate">
                  <input type="hidden" id="action" name="action" value="change_pass" />

                  <!-- Old Password -->
                  <div class="nes-form-group">
                    <label class="nes-label" for="oldpass" data-i18n="profile.form.oldPassword">رمز ورود قبلی</label>
                    <div class="profile-edit__password-wrapper">
                      <i class="es esprit-lock profile-edit__input-icon"></i>
                      <input
                        type="password"
                        class="nes-input profile-edit__password-input"
                        name="oldpass"
                        id="oldpass"
                        placeholder=""
                        data-i18n="[placeholder]profile.form.oldPasswordPlaceholder"
                        maxlength="512"
                        dir="ltr"
                        autocomplete="off"
                      />
                      <button type="button" class="profile-edit__password-toggle" data-target="oldpass" aria-label="Toggle password visibility">
                        <i class="es esprit-eye"></i>
                      </button>
                    </div>
                    <span class="profile-edit__field-error"></span>
                  </div>

                  <!-- New Password -->
                  <div class="nes-form-group">
                    <label class="nes-label" for="newpass" data-i18n="profile.form.newPassword">رمز ورود جدید</label>
                    <div class="profile-edit__password-wrapper">
                      <i class="es esprit-lock profile-edit__input-icon"></i>
                      <input
                        type="password"
                        class="nes-input profile-edit__password-input"
                        name="newpass"
                        id="newpass"
                        placeholder=""
                        data-i18n="[placeholder]profile.form.newPasswordPlaceholder"
                        maxlength="512"
                        dir="ltr"
                        autocomplete="off"
                      />
                      <button type="button" class="profile-edit__password-toggle" data-target="newpass" aria-label="Toggle password visibility">
                        <i class="es esprit-eye"></i>
                      </button>
                    </div>
                    <!-- Password strength meter -->
                    <div class="profile-edit__password-strength">
                      <div class="profile-edit__password-strength-bar" id="password-strength-bar"></div>
                    </div>
                    <div class="profile-edit__password-hint" id="password-hint">
                      <span data-i18n="profile.form.passwordRequirements">رمز عبور باید شامل حروف بزرگ، کوچک و عدد باشد</span>
                    </div>
                    <span class="profile-edit__field-error"></span>
                  </div>

                  <!-- Repeat New Password -->
                  <div class="nes-form-group">
                    <label class="nes-label" for="newpassrepeat" data-i18n="profile.form.repeatPassword">تکرار رمز ورود</label>
                    <div class="profile-edit__password-wrapper">
                      <i class="es esprit-lock profile-edit__input-icon"></i>
                      <input
                        type="password"
                        class="nes-input profile-edit__password-input"
                        name="newpassrepeat"
                        id="newpassrepeat"
                        placeholder=""
                        data-i18n="[placeholder]profile.form.repeatPasswordPlaceholder"
                        maxlength="512"
                        dir="ltr"
                        autocomplete="off"
                      />
                      <button type="button" class="profile-edit__password-toggle" data-target="newpassrepeat" aria-label="Toggle password visibility">
                        <i class="es esprit-eye"></i>
                      </button>
                    </div>
                    <span class="profile-edit__field-error"></span>
                  </div>

                  <div class="form-message"></div>

                  <div class="nes-form-actions">
                    <button type="submit" class="nes-btn nes-btn-primary">
                      <i class="es esprit-check"></i>
                      <span data-i18n="profile.form.submit">ثبت فرم</span>
                    </button>
                  </div>
                </form>
              </div>

              <!-- تب آپلود تصویر -->
              <div class="profile-edit__tab-pane" id="avatar-tab" role="tabpanel" aria-labelledby="avatar-tab">
                <form id="avatarForm" method="post" class="nes-form" novalidate="novalidate">
                  <input type="hidden" id="action" name="action" value="save_profile_avatar" />

                  <div class="profile-edit__avatar-upload-container">
                    <!-- Avatar Preview -->
                    <div class="profile-edit__avatar-preview">
                      <img src="/uploads/sys/profiles/128/{userunicid}.jpg" alt="Current Avatar" class="profile-edit__avatar-image" id="avatar-preview-image" />
                      <div class="profile-edit__avatar-overlay" id="avatar-overlay">
                        <i class="es esprit-camera"></i>
                      </div>
                    </div>

                    <!-- File Input (hidden) -->
                    <input class="d-none" type="file" name="addpicurl-name" id="addpicurl-name" accept="image/*" />

                    <!-- Upload Button -->
                    <button class="nes-btn nes-btn-primary profile-edit__avatar-button" id="addpicurl" type="button">
                      <i class="es esprit-camera"></i>
                      <span data-i18n="profile.form.chooseAvatar">انتخاب تصویر</span>
                    </button>

                    <!-- File Info -->
                    <div class="profile-edit__file-info" id="file-info"></div>

                    <!-- Progress Bar -->
                    <div class="profile-edit__progress" id="upload-progress" style="display: none">
                      <div class="profile-edit__progress-bar" id="progress-bar" style="width: 0%"></div>
                      <span class="profile-edit__progress-text" id="progress-text">0%</span>
                    </div>

                    <!-- Messages -->
                    <div class="form-message"></div>

                    <!-- Help Text -->
                    <p class="profile-edit__help-text">
                      <span data-i18n="profile.form.avatarHelp">تصویر باید کمتر از 5MB و با فرمت JPG, PNG یا GIF باشد</span>
                    </p>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/profile-main.js"></script>
  </body>
</html>
